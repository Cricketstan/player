<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.js"></script>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .video-container {
    position: relative;
    width: 110%;
    height: 100%;
    background: #000;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  video {
    width: 110%;
    max-height: 100%;
    object-fit: contain; /* keeps correct aspect ratio */
    background: #000;
  }
</style>

<div class="video-container">
  <video autoplay oncanplay="this.muted=true" id="player" controls preload="metadata"></video>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById("player");

    // Get HLS source from URL param
    const params = new URLSearchParams(window.location.search);
    const source = params.get("domain/url");
    if (!source) {
      console.error("No HLS URL provided in domain/url param");
      return;
    }

    if (Hls.isSupported()) {
      const hls = new Hls();
      hls.loadSource(source);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
    } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
      video.src = source;
      video.addEventListener("loadedmetadata", () => video.play());
    }

    new Plyr(video);
  });
</script>
